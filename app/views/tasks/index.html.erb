<h2>タスク一覧</h2>
<p><%= notice %></p>

<%= form_with(model: @task, url: tasks_path, method: :get, local: true) do |form| %>
  <span>
    <%= form.label :task_name, "タスク名" %>
    <%= form.text_field :task_name %>
  </span>
  <span class="status">
    <%= form.label :status, "進捗" %>
    <%= form.select :status, options_for_select([[''], ['未着手',1],['着手中',2],['完了',3]]), class: 'form-control', id: 'task_status'%>
  </span>
  <%= form.submit "検索" %>
<% end %>

<%= link_to '新規タスク', new_task_path %>
<%= link_to '終了期限でソート', tasks_path(sort_deadline: "true") %>
<%= link_to '優先順位でソート', tasks_path(sort_priority: "true") %>

<table>
  <tr>
    <th><%= I18n.t('views.title.task_id') %></th>
    <th><%= I18n.t('views.title.task_name') %></th>
    <th><%= I18n.t('views.title.detail') %></th>
    <th><%= I18n.t('views.title.deadline') %></th>
    <th><%= I18n.t('views.title.status') %></th>
    <th><%= I18n.t('views.title.priority') %></th>
  </tr>
  <% @tasks.each do |task| %>
  <tr class="task_row">
    <td><%= task.id %></td>
    <td><%= task.task_name %></td>
    <td><%= task.detail %></td>
    <td><%= task.deadline %></td>
    <td>
      <%= '未着手' if task.status == 1 %>
      <%= '着手中' if task.status == 2 %>
      <%= '完了' if task.status == 3 %>
    </td>
    <td>
      <%= '' if task.priority == 0 %>
      <%= '低' if task.priority == 1 %>
      <%= '中' if task.priority == 2 %>
      <%= '高' if task.priority == 3 %>
    </td>
    <td><%= link_to 'show', task_path(task.id) %></td>
    <td><%= link_to 'edit', edit_task_path(task.id) %></td>
    <td><%= link_to 'destroy', task_path(task.id), method: :delete %></td>
  </tr>
  <% end %>
</table>
<%= paginate @tasks %>
